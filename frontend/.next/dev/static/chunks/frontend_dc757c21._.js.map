{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Administrator/Documents/IBE 160 Programmering med KI/CVAI Turbo/SG-Oslo-Best/frontend/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Session {\n  access_token: string;\n  refresh_token: string;\n}\n\ninterface AuthContextType {\n  session: Session | null;\n  login: (sessionData: Session) => void;\n  logout: () => void;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [session, setSession] = useState<Session | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    // Try to load session from local storage on initial load\n    try {\n      const storedSession = localStorage.getItem('session');\n      if (storedSession) {\n        setSession(JSON.parse(storedSession));\n      }\n    } catch (error) {\n      console.error(\"Failed to parse session from localStorage\", error);\n      localStorage.removeItem('session');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // This effect will run when the session state changes\n  useEffect(() => {\n    // Redirect to dashboard only if a session is newly set\n    if (session?.access_token) {\n      router.push('/dashboard');\n    }\n  }, [session]);\n\n  const login = (sessionData: Session) => {\n    setSession(sessionData);\n    try {\n      localStorage.setItem('session', JSON.stringify(sessionData));\n    } catch (error) {\n      console.error(\"Failed to save session to localStorage\", error);\n    }\n  };\n\n  const logout = () => {\n    setSession(null);\n    try {\n      localStorage.removeItem('session');\n      router.push('/login'); // Or your auth page\n    } catch (error) {\n      console.error(\"Failed to remove session from localStorage\", error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ session, login, logout, isLoading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":["c","_c","createContext","useContext","useState","useEffect","ReactNode","useRouter","Session","access_token","refresh_token","AuthContextType","session","login","sessionData","logout","isLoading","AuthContext","undefined","AuthProvider","children","setSession","setIsLoading","router","storedSession","localStorage","getItem","JSON","parse","error","console","removeItem","push","setItem","stringify","useAuth","$","$i","Symbol","for","context","Error"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["C:/Users/Administrator/Documents/IBE 160 Programmering med KI/CVAI Turbo/SG-Oslo-Best/frontend/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport type { Metadata } from \"next\";\nimport \"./globals.css\";\nimport { AuthProvider } from \"@/context/AuthContext\";\n\n// Metadata cannot be exported from a client component.\n// This can be handled by moving it to a server component parent layout if needed.\n// For now, we will comment it out to make the layout a client component.\n// export const metadata: Metadata = {\n//   title: \"CVAI Turbo\",\n//   description: \"Generate cover letters with AI\",\n// };\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <AuthProvider>{children}</AuthProvider>\n      </body>\n    </html>\n  );\n}\n"],"names":["c","_c","Metadata","AuthProvider","RootLayout","t0","$","$i","Symbol","for","children","t1"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAIb,SAASE,YAAY,QAAQ,uBAAuB;AAJpD,YAAY;;;;;AAcG,oBAAAE,EAAA;IAAA,MAAAC,CAAA,OAAAL,gLAAA,EAAA;IAAA,IAAAK,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAoB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAIjC;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAI,QAAA,EAAA;QAEEC,EAAA,iBAAA,6LAAA,IAIO;YAJI,IAAI,EAAJ,IAAI;oCACb,6LAAA,IAEO;wCADL,6LAAC,sJAAY,CAAED;8BAAAA,QAAO,CAAE,EAAvB,YAAY,CACf,EAFA,IAEO,CACT,EAJA,IAIO;;;;;;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,OAJPK,EAIO;AAAA;KAVIP","ignoreList":[]}}]
}