{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Documents/IBE%20160%20Programmering%20med%20KI/CVAI%20Turbo/SG-Oslo-Best/frontend/components/ProfileCVForm.tsx"],"sourcesContent":["// frontend/components/ProfileCVForm.tsx\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext'; // Assuming AuthContext is located at '@/context/AuthContext'\n\ninterface ProfileCVFormInputs {\n  fullName: string;\n  dateOfBirth: string;\n  gender: string;\n  phoneNumber: string;\n  address: string;\n  cvContent: string;\n}\n\nconst ProfileCVForm: React.FC = () => {\n  const { register, handleSubmit, formState: { errors }, setError } = useForm<ProfileCVFormInputs>();\n  const router = useRouter();\n  const { session } = useAuth();\n  const [submissionError, setSubmissionError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\n\n  const onSubmit = async (data: ProfileCVFormInputs) => {\n    if (!session?.access_token) {\n      setSubmissionError(\"You must be logged in to create a profile.\");\n      return;\n    }\n\n    setIsSubmitting(true);\n    setSubmissionError(null);\n\n    const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:8000';\n\n    try {\n      const response = await fetch(`${backendUrl}/api/v1/users/me/cv`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({\n          full_name: data.fullName,\n          date_of_birth: data.dateOfBirth,\n          gender: data.gender,\n          phone_number: data.phoneNumber,\n          address: data.address,\n          cv_content: data.cvContent,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        const errorMessage = errorData.detail || 'Failed to save profile and CV.';\n        setSubmissionError(errorMessage);\n        // Optionally, map backend errors to specific form fields\n        if (errorData.detail && Array.isArray(errorData.detail)) {\n            errorData.detail.forEach((err: any) => {\n                if (err.loc && err.loc.length > 1) {\n                    const fieldName = err.loc[1]; // Assuming loc[1] is the field name\n                    // Ensure fieldName matches ProfileCVFormInputs keys\n                    if (fieldName in data) {\n                        setError(fieldName as keyof ProfileCVFormInputs, { type: 'manual', message: err.msg });\n                    }\n                }\n            });\n        }\n        throw new Error(errorMessage);\n      }\n\n      router.push('/dashboard'); // Redirect on successful submission\n    } catch (error: any) {\n      console.error(\"Submission error:\", error);\n      if (!submissionError) { // Only set if not already set by backend response\n        setSubmissionError(error.message || 'An unexpected error occurred.');\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4 p-4\">\n      <h2 className=\"text-2xl font-bold mb-4\">Create Your Profile and CV</h2>\n      \n      {submissionError && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n          <strong className=\"font-bold\">Error: </strong>\n          <span className=\"block sm:inline\">{submissionError}</span>\n        </div>\n      )}\n\n      <div>\n        <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-700\">Full Name</label>\n        <input\n          id=\"fullName\"\n          type=\"text\"\n          {...register('fullName', { required: 'Full Name is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"fullName-input\"\n          disabled={isSubmitting}\n        />\n        {errors.fullName && <p className=\"mt-1 text-sm text-red-600\">{errors.fullName.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"dateOfBirth\" className=\"block text-sm font-medium text-gray-700\">Date of Birth</label>\n        <input\n          id=\"dateOfBirth\"\n          type=\"date\"\n          {...register('dateOfBirth', { required: 'Date of Birth is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"dateOfBirth-input\"\n          disabled={isSubmitting}\n        />\n        {errors.dateOfBirth && <p className=\"mt-1 text-sm text-red-600\">{errors.dateOfBirth.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700\">Gender</label>\n        <select\n          id=\"gender\"\n          {...register('gender', { required: 'Gender is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"gender-select\"\n          disabled={isSubmitting}\n        >\n          <option value=\"\">Select Gender</option>\n          <option value=\"male\">Male</option>\n          <option value=\"female\">Female</option>\n          <option value=\"other\">Other</option>\n        </select>\n        {errors.gender && <p className=\"mt-1 text-sm text-red-600\">{errors.gender.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"phoneNumber\" className=\"block text-sm font-medium text-gray-700\">Phone Number</label>\n        <input\n          id=\"phoneNumber\"\n          type=\"tel\"\n          {...register('phoneNumber', { required: 'Phone Number is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"phoneNumber-input\"\n          disabled={isSubmitting}\n        />\n        {errors.phoneNumber && <p className=\"mt-1 text-sm text-red-600\">{errors.phoneNumber.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700\">Address</label>\n        <input\n          id=\"address\"\n          type=\"text\"\n          {...register('address', { required: 'Address is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"address-input\"\n          disabled={isSubmitting}\n        />\n        {errors.address && <p className=\"mt-1 text-sm text-red-600\">{errors.address.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"cvContent\" className=\"block text-sm font-medium text-gray-700\">CV Content</label>\n        <textarea\n          id=\"cvContent\"\n          rows={10}\n          {...register('cvContent', { required: 'CV Content is required' })}\n          className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\n          data-testid=\"cvContent-textarea\"\n          disabled={isSubmitting}\n        ></textarea>\n        {errors.cvContent && <p className=\"mt-1 text-sm text-red-600\">{errors.cvContent.message}</p>}\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n        data-testid=\"submit-button\"\n        disabled={isSubmitting}\n      >\n        {isSubmitting ? 'Saving...' : 'Save Profile and CV'}\n      </button>\n    </form>\n  );\n};\n\nexport default ProfileCVForm;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Documents/IBE%20160%20Programmering%20med%20KI/CVAI%20Turbo/SG-Oslo-Best/frontend/app/cv-creation/page.tsx"],"sourcesContent":["\"use client\";\n\nimport ProfileCVForm from \"@/components/ProfileCVForm\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect } from \"react\";\n\nexport default function CvCreationPage() {\n  const { session, isLoading } = useAuth();\n  const router = useRouter();\n\n  // Redirect to dashboard if already logged in and not on cv-creation page\n  useEffect(() => {\n    if (!isLoading && !session) {\n      router.push(\"/\"); // Redirect to login if not authenticated\n    }\n    // TODO: Add logic to check if profile/CV already exists and redirect to dashboard\n    // This would require an API call to check user's profile status\n  }, [session, isLoading, router]);\n\n  if (isLoading || !session) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p>Loading...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"w-full max-w-lg\">\n        <ProfileCVForm />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,IAAA,8IAAO;IACtC,MAAM,SAAS,IAAA,+IAAS;IAExB,yEAAyE;IACzE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,CAAC,SAAS;YAC1B,OAAO,IAAI,CAAC,MAAM,yCAAyC;QAC7D;IACA,kFAAkF;IAClF,gEAAgE;IAClE,GAAG;QAAC;QAAS;QAAW;KAAO;IAE/B,IAAI,aAAa,CAAC,SAAS;QACzB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,mJAAa;;;;;;;;;;;;;;;AAItB"}}]
}