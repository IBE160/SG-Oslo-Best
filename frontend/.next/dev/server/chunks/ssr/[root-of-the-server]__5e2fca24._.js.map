{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Documents/IBE%20160%20Programmering%20med%20KI/CVAI%20Turbo/SG-Oslo-Best/frontend/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Session {\n  access_token: string;\n  refresh_token: string;\n}\n\ninterface AuthContextType {\n  session: Session | null;\n  login: (sessionData: Session) => void;\n  logout: () => void;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [session, setSession] = useState<Session | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    // Try to load session from local storage on initial load\n    try {\n      const storedSession = localStorage.getItem('session');\n      if (storedSession) {\n        setSession(JSON.parse(storedSession));\n      }\n    } catch (error) {\n      console.error(\"Failed to parse session from localStorage\", error);\n      localStorage.removeItem('session');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // This effect will run when the session state changes\n  useEffect(() => {\n    // Redirect to dashboard only if a session is newly set\n    if (session?.access_token) {\n      router.push('/dashboard');\n    }\n  }, [session]);\n\n  const login = (sessionData: Session) => {\n    setSession(sessionData);\n    try {\n      localStorage.setItem('session', JSON.stringify(sessionData));\n    } catch (error) {\n      console.error(\"Failed to save session to localStorage\", error);\n    }\n  };\n\n  const logout = () => {\n    setSession(null);\n    try {\n      localStorage.removeItem('session');\n      router.push('/login'); // Or your auth page\n    } catch (error) {\n      console.error(\"Failed to remove session from localStorage\", error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ session, login, logout, isLoading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAiBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,yDAAyD;QACzD,IAAI;YACF,MAAM,gBAAgB,aAAa,OAAO,CAAC;YAC3C,IAAI,eAAe;gBACjB,WAAW,KAAK,KAAK,CAAC;YACxB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6CAA6C;YAC3D,aAAa,UAAU,CAAC;QAC1B,SAAU;YACR,aAAa;QACf;IACF,GAAG,EAAE;IAEL,sDAAsD;IACtD,IAAA,kNAAS,EAAC;QACR,uDAAuD;QACvD,IAAI,SAAS,cAAc;YACzB,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,QAAQ,CAAC;QACb,WAAW;QACX,IAAI;YACF,aAAa,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC;QACjD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0CAA0C;QAC1D;IACF;IAEA,MAAM,SAAS;QACb,WAAW;QACX,IAAI;YACF,aAAa,UAAU,CAAC;YACxB,OAAO,IAAI,CAAC,WAAW,oBAAoB;QAC7C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8CAA8C;QAC9D;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAS;YAAO;YAAQ;QAAU;kBAC9D;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Documents/IBE%20160%20Programmering%20med%20KI/CVAI%20Turbo/SG-Oslo-Best/frontend/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport type { Metadata } from \"next\";\nimport \"./globals.css\";\nimport { AuthProvider } from \"@/context/AuthContext\";\n\n// Metadata cannot be exported from a client component.\n// This can be handled by moving it to a server component parent layout if needed.\n// For now, we will comment it out to make the layout a client component.\n// export const metadata: Metadata = {\n//   title: \"CVAI Turbo\",\n//   description: \"Generate cover letters with AI\",\n// };\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <AuthProvider>{children}</AuthProvider>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;AAIA;AAJA;;;;AAce,SAAS,WAAW,EACjC,QAAQ,EAGR;IACA,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;sBACC,cAAA,8OAAC,mJAAY;0BAAE;;;;;;;;;;;;;;;;AAIvB"}}]
}