## Case Title
CVAI Turbo

## Background
Many students find it challenging to adapt their CVs and cover letters to specific job applications. Doing so requires strong writing skills and the ability to emphasize the most relevant experiences. An AI-powered tool can help students by creating customized cover letter.

## Purpose
This project is to develop a prototype of a tool that assists students, by taking their CV, job application and instructions as input. The tool will then generate customized cover letter.

## Target Users
For university and college students applying for internships or part-time jobs, as well as for adademic institutions seeking to better support students in their career.

## Core Functionality

### Must Have (MVP)
- Create update, delete for CV only one (plain text)
  - Sub-part of CV is a profile.
  - A textbox where the user can put instructions (here option for style and tone).
- Create update, delete job application
  - Job advertisement as plain text
- Cover letter will be generated by third party LLM.

## User Flows

### Flow 1: Create new student user
**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views a static text that explains how to create cover letter.
   - Clicks "Register" CTA button
2. **Authentication**
   - If not registered: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **New user**
   (The students fills in the information in free-text box corresponding to each variable {})
   - Create profile 
      - Name: {name}
      - Date of birth: {mm/dd/yy}
      - Gender: {female/male/other}
      - Phone number: {phone number}
      - Address: {address}
   - Create a CV using the information from the profile, along with the following additional details:
      - Education: {education}
      - Work experience: {work experience}
      - Qualifications: {qualification}
      - Language: {language}
    - A button "Save the information" - if clicked then go to step 4 (flow 1).
    - If required fields are left empty, they’re highlighted with inline warnings, a banner prompts completion, and the “Save” button remains disabled until all fields are filled.
4. **Home page**
   - View profile
   - A button "New job application" - redirect to step 5 (flow 1).
5. **Create new job applications**
   - **Input**: 
     - Instructions - a large free-text box to write optional style and tone.
     - CV - When clicked the "New job application" button, the CV automatically is pulled from the saved profile.
     - Job application - a large free-text box to paste in the job application in plain text.
   - **Output**: Optional cover letter and create button "save" and "regenerate".
6. **Output optinos**
     - If the student is satisfied with the cover letter, then the student can click on "save".
     - If the student is NOT satisfied, then the student can click on "regenerate" and be redirected to instructions on step 5 (flow 1).
7. **Clicks the "save" button**
    - Save and download the cover letter as plain text.
    - "Exit to home page" - returns to user home page

**Exit Point**: Student returns to home page or logs out.

### Flow 2: Already student user

**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views an explaining of how to create cover letter.
   - Clicks "Log in" CTA button
2. **Authentication**
   - If not logged in: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **Update profile**
   (The students fills in the information in free-text box corresponding to each variable {})
   - Display pop-up with saved profile and CV information, and generate both button for "Update" and "Dismiss":
      - Name: {name}
      - Date of birth: {mm/dd/yy}
      - Gender: {female/male/other}
      - Phone number: {phone number}
      - Address: {address}
      - Education: {education}
      - Work experience: {work experience}
      - Qualifications: {qualification}
      - Language: {language}
    - The student has two options:
      - **Option A - Update**: If user has modified information button "Update information" becomes available and user can click on it.
        - Saves the new information on profile.
      - **Option B - Dismiss**: Clicks "Dismiss" button
        - Go to step 4 (flow 2).
  - If required fields are left empty, they’re highlighted with inline warnings, a banner prompts completion, and the “Save” button remains disabled until all fields are filled.
4. **Home page**
   - View profile and saved cover letters.
   - A button "New job application" - redirect to step 5 (flow 2).
5. **Create new job application**
   **Input**: 
     - Instructions - a large free-text box to write optional style and tone.
     - CV - When clicked the "New job application" button, the CV automatically is pulled from the saved profile.
     - Job application - a large free-text box to paste in the job application in plain text.
   - **Output**: Optional cover letter and create button "save" and "regenerate".
6. **Output options**
     - If the student is satisfied with the cover letter, then the student can click on "save".
     - If the student is NOT satisfied, then the student can click on "regenerate" and be redirected to instructions on step 5 (flow 2).
7. **Clicks the "save" button**
    - Save and download the cover letter as plain text.
    - "Exit to home page" - returns to user home page.

**Exit Point**: Student returns to home page or logs out.

### Flow 3: Already student user, view and download cover letters 

**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views an explaining of how to create cover letter.
   - Clicks "Log in" CTA button
2. **Authentication**
   - If not logged in: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **Update profile**
   (The students fills in the information in free-text box corresponding to each variable {})
   - Display pop-up with saved profile and CV information, and generate both button for "Update" and "Dismiss":
      - Name: {name}
      - Date of birth: {mm/dd/yy}
      - Gender: {female/male/other}
      - Phone number: {phone number}
      - Address: {address}
      - Education: {education}
      - Work experience: {work experience}
      - Qualifications: {qualification}
      - Language: {language}
    - The student has two options:
      - **Option A - Update**: If user has modified information button "Update information" becomes available and user can click on it.
        - Saves the new information on profile.
      - **Option B - Dismiss**: Clicks "Dismiss" button
        - Go to step 4 (flow 3).
  - If required fields are left empty, they’re highlighted with inline warnings, a banner prompts completion, and the “Save” button remains disabled until all fields are filled.
4. **Home page**
   - View profile and saved cover letters.
   - A button "New job application".
5. **Saved cover letter**
    - Display saved profile information.
    - Horizontal list of cover letters.
      - Saved after creation-date.
    - User can click on desired cover letter and it's displayed as a pop-up. User can then click on a "Download" button, a "Editing" button or a "Delete" button.
6. **If clicked on "Download" button**
    - When clicks "Download" button: download the cover letter as plain text on lokal computer.
    - Button "Exit" to saved cover letters.
7. **If clicked on "Editing" button**
   - **Input**: 
     - Instructions - a large free-text box to write optional style and tone.
     - CV - When clicked the "Editing" button, the CV automatically is pulled from the saved profile.
     - Cover letter text - a large free-text box with the cover letter the student want to edit in it. 
   - **Output**: Optional cover letter and create button "save" and "regenerate".
   - The student has to options:
     - **Option A - save**: If the student is satisfied with the cover letter, then the student can click on "save".
        - Save and download the new cover letter as plain text.
        - "Exit to home page" - returns to user home page.
     - **Option B - regenerate**: If the student is NOT satisfied, then the student can click on "regenerate" and be redirected to instructions on step 7 (flow 3).
8. **If clicked on "Delete" button**
   - Deletes the cover letter from the student profile.

**Exit Point**: Student returns to home page or logs out.

## Data Requirements
**User management**
   - User: Managed by Supabase Auth (auth.users table) with user_id (UUID), email, encrypted_password
   - User Profiles: user_id (FK to auth.users), full_name, created_at, last_login, metadata (JSONB)
   - User information: user_info (FK to users_id), user_birthday, user_gender, phone_number, user_address, user_education, work_experience, user_qualifications, user_language.

**Job data** 
   - Job application: user_job (FK to auth.users), job_title, job_description, job_qualifications.

**Instructions**
- Instructions: specifications on how the AI shall generate the cover letter.
- Textbox: "free writing on layout (style and tone)"

## User Stories
As a student, I want to upload my CV and a job advertisement to get a customized cover letter.

## Technical Constraints
- Support English language.
- Frontend: Next.js with simple user authentication, with Tailwind.css.
- Backend: Fast API (Python)
- AI engine: Use of NLP models (GEMINI 2.5 Pro/Flash).
- Database and user management: Supabase.
- Platform Type: web application.

## Technical Specifitaion

### Frontend Specification
**Framework**: Next.js 14+ with App Router for server-side rendering and optimal performance
- **Language**: TypeScript for type safety and better AI-assisted development
- **Styling**: Tailwind CSS for rapid, responsive UI development
- **State Management**: Zustand for lightweight, scalable global state management
- **Shadcn UI**: Shadcn UI for rapid, responsive UI development
- **Authentication UI**: Supabase Auth UI components + custom styling
- **API Communication**: Axios with interceptors for authenticated requests
- **Deployment**: Vercel for frontend hosting with automatic CI/CD

**Architecture Pattern**: Component-based architecture with clear separation between presentation components, container components, and business logic hooks.

### Backend Specification
- **Framework**: FastAPI (Python) for high-performance RESTful API development
- **Language**: Python for AI integration compatibility and rapid development
- **Database**: Supabase (PostgreSQL) for managed database and real-time capabilities
- **Authentication**: Supabase Auth for built-in user management, JWT tokens, and email verification
- **Authorization**: Row Level Security (RLS) policies in Supabase + role-based middleware (student)
- **ORM**: SQLAlchemy for database operations and type safety
- **Database Migrations**: Alembic for version-controlled schema changes
- **AI Integration**:
  - GEMINI 2.5 Pro/Flash for AI player decisions and question generation
  - Custom prompt engineering for consistent AI behavior
  - Fallback logic for API failures
- **Email Service**: Supabase Auth for authentication emails + SendGrid for custom transactional emails
- **API Documentation**: FastAPI automatic OpenAPI/Swagger documentation
- **Testing**: Pytest for unit and integration tests
- **Build Tool**: UV for fast Python package management
- **Deployment**: Vercel (FastAPI supports Vercel deployment)

**API Architecture**: RESTful API design with versioning (/api/v1/) and clear resource-oriented endpoints.


### Database Specification
- **Database Type**: Supabase (PostgreSQL-based relational database)
- **ORM**: SQLAlchemy for Python-based type-safe database access
- **Migrations**: Alembic for database schema version control
- **Hosting**: Supabase managed cloud (includes automatic backups, scaling, and monitoring)

**Schema Design**:
- **Normalized relational schema** with proper foreign key constraints
- **Row Level Security (RLS)**: Supabase RLS policies to ensure users only access their own data
- **Indexes** on frequently queried fields (user_id, user_job)
- **JSON/JSONB columns** for flexible configuration storage (instructions)
- **Soft deletes** for user data (GDPR compliance)
- **Supabase Auth integration**: Users table managed by Supabase Auth with extended profile data

**Supabase-Specific Features**:
- **RLS Policies**: Students can only view their own cover letter


### Platform Type
**Primary Platform**: Web application (browser-based)

**Target Devices**:
- Desktop computers (primary): Windows, macOS, Linux
- Laptops (primary): All operating systems

**Browser Compatibility**:
- Chrome 90+ (primary testing target)
- Firefox 88+
- Safari 14+
- Edge 90+

**Responsive Breakpoints**:
- Desktop: 1280px+ (optimal experience)
- Laptop: 1024px-1279px (full features)


### User Authentication Specification
**Authentication Method**: Supabase Auth with JWT-based authentication

**Features**:
- Email/password registration with built-in validation
- Automatic email verification via Supabase Auth email templates
- Secure password reset flow with magic links
- Session management with automatic refresh token rotation
- "Remember me" functionality via Supabase persistent sessions
- Account lockout and rate limiting built into Supabase Auth
- User metadata storage for roles (student)

**Implementation Details**:
- Passwords automatically hashed by Supabase (bcrypt)
- JWT access tokens managed by Supabase (automatic expiry and refresh)
- Refresh tokens securely stored by Supabase (httpOnly cookies)
- Role-based access control via Supabase user metadata + RLS policies
- OAuth 2.0 support built-in (Google, Microsoft, GitHub) - can enable with configuration

**Supabase Auth Benefits**:
- Built-in security best practices (password hashing, token management)
- Automatic rate limiting on authentication endpoints
- CAPTCHA support for bot prevention
- Multi-factor authentication (MFA) support available
- Email templates customizable for branding
- User management dashboard in Supabase console

**Security Measures**:
- HTTPS enforced by Supabase and Vercel
- CSRF protection on authentication forms
- Email verification required before full account access
- Password strength requirements configurable in Supabase
- Row Level Security (RLS) policies enforce data access control
- Supabase API keys separated (public anon key vs. service role key)

## Success Criteria
- A working prototype that create and generation functionality:
  - Input: students' own CV (plain text), job application (plain text) and instructions.
  - Output: Cover letter

## Workmethod and resources
- Four students.
  - Keep each other posted with organized team meeting every week.
- BMAD-method/Agile.
- Access to OpenAI/Gemini CLI.
- GitHub for version control.
- Github repository.
- Visual Studio Code.
- Docker (running application - frontend, backend and database).

## Timeline and Milestones

**Total Duration**: 5 weeks following BMAD-methodology (4-phase model)

This timeline follows the 4-phase model of the BMAD-methodology, where phases 1 and 2 are done in 1 week, phase 3 is done in 2 weeks, and phase 4 is done in 2 weeks.

| Phase | Duration | Week | Focus |
|-------|----------|------|-------|
| Phase 1 & 2: Analyze and Planning | 1 week | Week 44 | Requirements analysis, project planning, stakeholder alignment |
| Phase 3: Solution Architecture and UI/UX Design | 2 weeks | Week 45-46 | Technical architecture, database design, UI/UX mockups, API design |
| Phase 4: Development and Deployment | 2 weeks | Week 47-48 | Implementation, testing, deployment |