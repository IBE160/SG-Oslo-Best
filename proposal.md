## Case Title
CVAI Turbo

## Background
Many students find it challenging to adapt their CVs and cover letters to specific job applications. Doing so requires strong writing skills and the ability to emphasize the most relevant experiences. An AI-powered tool can help students by creating customized cover letter.

## Purpose
This project is to develop a prototype of an AI-based tool that assists students, by taking their CV, job application and instructions as input. The tool will then generate customized cover letter.

## Target Users
For university and college students applying for internships or part-time jobs, as well as for adademic institutions seeking to better support students in their career.

## Core Functionality

### Must Have (MVP)
#### Phase 1
- Create update, delete for CV only one (plain text)
  - Sub-part of CV is a profile.
  - A textbox where the user can put instructions (here option for style and tone).
- Create update, delete job application
  - Job advertisement as plain text
- Cover letter will be generated by third party LLM.

## User Flows

### Flow 1: Create new student user
**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views an explaining of how to create cover letter.
   - Clicks "Register" CTA button
2. **Authentication**
   - If not registered: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **New user**
   - Create profile/CV
      - Name: "name"
      - Date of birth: "mm/dd/yy"
      - Gender: "female/male/other"
      - Phone number: "phone number"
      - Address: "address"
      - Education: "education"
      - Work experience: "work experience"
      - Qualifications: "qualification"
      - Language: "language"
    - A button "Save the information" - if clicked then go to step 4 (flow 1). 
4. **Home page**
   - View profile
   - A button "New job application" - redirect to step 5 (flow 1).
5. **Create new job applications**
   - **Input**: instructions, CV and job application
   - **Output**: Optional cover letter and create button "save" and "regenerate".
6. **Output optinos**
     - If the student is satisfied with the cover letter, then the student can click on "save".
     - If the student is NOT satisfied, then the student can click on "regenerate" and be redirected to instructions on step 5 (flow 1).
7. **Clicks the "save" button**
    - Save and download the cover letter as plain text.
    - "Exit to home page" - returns to user home page

**Exit Point**: Student returns to home page or logs out.

### Flow 2: Already student user

**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views an explaining of how to create cover letter.
   - Clicks "Log in" CTA button
2. **Authentication**
   - If not logged in: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **Update profile**
   - Display pop-up with saved profile information, and generate both button for "Update" and "Dismiss":
      - Name: "name"
      - Date of birth: "mm/dd/yy"
      - Gender: "female/male/other"
      - Phone number: "phone number"
      - Address: "address"
      - Education: "education"
      - Work experience: "work experience"
      - Qualifications: "qualification"
      - Language: "language"
    - The student has two options:
      - **Option A - Update**: If user has modified information button "Update information" becomes available and user can click on it.
        - Saves the new information on profile.
      - **Option B - Dismiss**: Clicks "Dismiss" button
        - Go to step 4 (flow 2).
4. **Home page**
   - View profile and saved cover letters.
   - A button "New job application" - redirect to step 5 (flow 2).
5. **Create new job application**
   - **Input**: instructions, CV and job application 
   - **Output**: Optional cover letter and create button "save" and "regenerate".
6. **Output options**
     - If the student is satisfied with the cover letter, then the student can click on "save".
     - If the student is NOT satisfied, then the student can click on "regenerate" and be redirected to instructions on step 5 (flow 1).
7. **Clicks the "save" button**
    - Save and download the cover letter as plain text.
    - "Exit to home page" - returns to user home page.

**Exit Point**: Student returns to home page or logs out.

### Flow 3: Already student user, view and download cover letters 

**Entry Point**: Student lands on home page

1. **Landing Page**
   - Student views an explaining of how to create cover letter.
   - Clicks "Log in" CTA button
2. **Authentication**
   - If not logged in: Redirects to registration/login page
   - Student registers with email and password
   - Receives verification email and clicks verification link
   - Redirected back to platform and automatically logged in
3. **Update profile**
   - Display pop-up with saved profile information, and generate both button for "Update" and "Dismiss":
      - Name: "name"
      - Date of birth: "mm/dd/yy"
      - Gender: "female/male/other"
      - Phone number: "phone number"
      - Address: "address"
      - Education: "education"
      - Work experience: "work experience"
      - Qualifications: "qualification"
      - Language: "language"
    - The student has two options:
      - **Option A - Update**: If user has modified information button "Update information" becomes available and user can click on it.
        - Saves the new information on profile.
      - **Option B - Dismiss**: Clicks "Dismiss" button
        - Go to step 4 (flow 3).
4. **Home page**
   - View profile and saved cover letters.
   - A button "New job application".
5. **Saved cover letter**
    - Display saved profile information.
    - Horizontal list of cover letters.
      - Saved after creation-date.
    - User can click on desired cover letter and it's displayed as a pop-up, then user can click on "Download" button.
6. **Download**
    - When clicks "Download" button: download the cover letter as plain text on lokal computer.
    - Button "Exit" to saved cover letters.

**Exit Point**: Student returns to home page or logs out.

## Data Requirements
**User management**
   - User: Managed by Supabase Auth (auth.users table) with user_id (UUID), email, encrypted_password
   - User Profiles: user_id (FK to auth.users), full_name, created_at, last_login, metadata (JSONB)
   - User information: user_info (FK to users_id), user_birthday, user_gender, phone_number, user_address, user_education, work_experience, user_qualifications, user_language.

**Job data** 
   - Job application: user_job (FK to auth.users), job_title, job_description, job_qualifications.

**Instructions**
- Instructions: specifications on how the AI shall generate the cover letter.
- Textbox: "free writing on layout (style and tone)"

## User Stories
As a student, I want to upload my CV and a job advertisement to get a customized cover letter.

## Technical Constraints
- Support English language.
- Frontend: Next.js with simple user authentication, with Tailwind.css.
- Backend: Node.js JavaScript runtime for the server, and Express.js framework for API endpoints.
- AI engine: Use of NLP models (GPT-5).
- Database and user management: Supabase.
- Platform Type: web application.

## Technical Specifitaion

### Frontend Specification
**Framework**: Next.js 14+ with App Router for server-side rendering and optimal performance
- **Language**: TypeScript for type safety and better AI-assisted development
- **Styling**: Tailwind CSS for rapid, responsive UI development
- **State Management**: Zustand for lightweight, scalable global state management
- **Shadcn UI**: Shadcn UI for rapid, responsive UI development
- **Forms**: React Hook Form with Zod validation for robust form handling
- **Authentication UI**: Supabase Auth UI components + custom styling
- **API Communication**: Axios with interceptors for authenticated requests
- **Deployment**: Vercel for frontend hosting with automatic CI/CD

**Architecture Pattern**: Component-based architecture with clear separation between presentation components, container components, and business logic hooks.

### Backend Specification (KOMMENTAR TIL MICHEAL: dette er det Bård kommer til å bruke, kan du se over om det er noe vi kan bruke?)
- **Framework**: FastAPI (Python) for high-performance RESTful API development
- **Language**: Python for AI integration compatibility and rapid development
- **Database**: Supabase (PostgreSQL) for managed database and real-time capabilities
- **Authentication**: Supabase Auth for built-in user management, JWT tokens, and email verification
- **Authorization**: Row Level Security (RLS) policies in Supabase + role-based middleware (student/teacher/admin roles)
- **ORM**: SQLAlchemy for database operations and type safety
- **Database Migrations**: Alembic for version-controlled schema changes
- **AI Integration**:
  - OpenAI GPT-4 API for AI player decisions and question generation
  - Custom prompt engineering for consistent AI behavior
  - Fallback logic for API failures
- **Payment Processing**: Stripe API for subscription management and payment processing
- **Email Service**: Supabase Auth for authentication emails + SendGrid for custom transactional emails
- **Real-time Communication**: Supabase Realtime for live game monitoring and updates
- **API Documentation**: FastAPI automatic OpenAPI/Swagger documentation
- **Testing**: Pytest for unit and integration tests
- **Build Tool**: UV for fast Python package management
- **Deployment**: Vercel (FastAPI supports Vercel deployment)

**API Architecture**: RESTful API design with versioning (/api/v1/) and clear resource-oriented endpoints. Supabase Realtime for live game updates instead of WebSockets.


### Database Specification
- **Database Type**: Supabase (PostgreSQL-based relational database)
- **ORM**: SQLAlchemy for Python-based type-safe database access
- **Migrations**: Alembic for database schema version control
- **Hosting**: Supabase managed cloud (includes automatic backups, scaling, and monitoring)

**Schema Design**:
- **Normalized relational schema** with proper foreign key constraints
- **Row Level Security (RLS)**: Supabase RLS policies to ensure users only access their own data
- **Indexes** on frequently queried fields (user_id, game_id, session_id, class_id)
- **JSON/JSONB columns** for flexible configuration storage (game_config, questions, metrics)
- **Partitioning** for game_rounds table if data volume grows (future optimization)
- **Soft deletes** for user data (GDPR compliance)
- **Supabase Auth integration**: Users table managed by Supabase Auth with extended profile data

**Supabase-Specific Features**:
- **Real-time subscriptions**: Frontend can subscribe to game_rounds and player_states changes for live updates
- **RLS Policies**: Students can only view their own games; teachers can view their class games


## Success Criteria
- A working prototype that create and generation functionality:
  - Input: students' own CV (plain text), job application (plain text) and instructions.
  - Output: Cover letter

## Workmethod and resources
- Four students.
  - Keep each other posted with organized team meeting every week.
- BMAD-method/Agile.
- Access to OpenAI/Gemini CLI.
- GitHub for version control.
- Github repository.
- Visual Studio Code.
- Docker (running application - frontend, backend and database).

### Timeline with milestone
- Sprint 1 (weeks 1-2): Basic frontend + backend + AI integration
- Sprint 2 (weeks 3-4): Document processing + cover letter generation
- Sprint 3 (weeks 5-6): Testing, bug fixes, polish, documentation